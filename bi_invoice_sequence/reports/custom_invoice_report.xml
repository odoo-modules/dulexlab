<odoo>

    <report id="custom_inv_report"
            model="account.invoice"
            string="Custom Invoice"
            report_type="qweb-pdf"
            name="bi_invoice_sequence.custom_inv_report_template"
            file="bi_invoice_sequence.custom_inv_report_template"
            attachment_use="True"
    />


    <template id="custom_inv_report_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <t t-foreach="docs" t-as="o">
                        <table style="width: 100%;">
                            <tbody>
                                <tr>
                                    <td style="text-align: center;">
                                        <span t-field="o.company_id.company_registry"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>سجل تجاري</strong>
                                    </td>
                                    <td style="text-align: right; width: 5%;"></td>
                                    <td style="text-align: center;background-color: #f9f9f9;">
                                        <t t-if="not o.tax_line_ids">
                                            <h4>
                                                <span t-field="o.number"/>
                                            </h4>
                                        </t>
                                        <t t-if="o.tax_line_ids">
                                            <h4>
                                                <span t-field="o.seq_un_taxed"/>
                                            </h4>
                                        </t>
                                        <t t-if="o.state == 'draft'">
                                            <h4>
                                                Draft
                                            </h4>
                                        </t>

                                    </td>
                                    <td style="text-align: center;background-color: #f9f9f9;">
                                        <h4>فاتورة مبيعات</h4>
                                    </td>
                                    <td style="width: 30%;"></td>
                                </tr>
                                <tr>
                                    <td style="text-align: center;">
                                        <span t-field="o.company_id.vat"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>بطاقة ضريبية</strong>
                                    </td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;"></td>
                                </tr>
                                <tr>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;"></td>
                                </tr>
                            </tbody>
                        </table>
                        <br/>
                        <table class="table-sm" style="width: 100%;">
                            <tbody>
                                <tr>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;">
                                        <strong>تاريخ التحصيل</strong>
                                    </td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;">
                                        <span t-field="o.date_invoice"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>التاريخ</strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;">
                                        <strong>امر التوريد</strong>
                                    </td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;">
                                        <span t-field="o.partner_id.name"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>العميل</strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;">
                                        <strong>اذن الصرف</strong>
                                    </td>
                                    <td style="text-align: right;" colspan="2">
                                        <span t-field="o.partner_id.street"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>العنوان</strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right;">
                                        <span t-field="o.user_id"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>المندوب</strong>
                                    </td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;">
                                        <span t-field="o.partner_id.state_id.name"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>المنطقة</strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;">
                                        <strong>رقم البوليصة</strong>
                                    </td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;">
                                        <span t-field="o.partner_id.phone"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>التليفون</strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right;">
                                        <span t-field="o.payment_term_id.name"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>القطاع</strong>
                                    </td>
                                    <td style="text-align: right;"></td>
                                    <td style="text-align: right;">
                                        <span t-field="o.partner_id.mobile"/>
                                    </td>
                                    <td style="text-align: right;">
                                        <strong>الموبايل</strong>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <br/>
                        <br/>
                        <table class="table-sm">
                            <thead style="background-color: #f9f9f9;border-radius:5px;">
                                <tr style="border-top:1px solid #c3c3c3;padding-top:3px;padding-bottom:3px;border-bottom:1px solid #c3c3c3">
                                    <th class="text-right" style="padding:2px">القيمة</th>
                                    <th class="text-right" style="padding:2px">الكمية</th>
                                    <th class="text-right" style="padding:2px">السعر الاساسي</th>
                                    <th class="text-right" dir="rtl" style="padding:5px">خ.م%</th>
                                    <th class="text-right" dir="rtl" style="padding:5px">خ.ق.م%</th>
                                    <th class="text-right" dir="rtl" style="padding:5px">خ.ص%</th>
                                    <th class="text-right" style="padding:2px">القيمة</th>
                                    <th class="text-right" style="padding:2px">سعر الجمهور</th>
                                    <th class="text-right" style="padding:2px;width:30%!important;">اسم الصنف</th>
                                    <th class="text-right" style="padding:2px;width:15%!important;">كود</th>
                                    <th class="text-right" style="padding:2px;">#</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="s" t-value="1"/>
                                <t t-foreach="o.invoice_line_ids" t-as="l">
                                    <tr style="padding-top:3px;padding-bottom:3px;border-bottom:1px solid #c3c3c3">
                                        <td>
                                            <span t-field="l.price_subtotal"/>
                                        </td>
                                        <td>
                                            <span t-field="l.quantity"/>

                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>


                                        <td></td>
                                        <td>
                                            <span t-field="l.public_price_lst"/>
                                        </td>
                                        <td class="text-right" style="width:30%!important;">
                                            <span t-esc="l.name"/>
                                        </td>

                                        <td>
                                            <span class="text-right" t-field="l.product_id.barcode"/>
                                        </td>
                                        <td>
                                            <span t-esc="s"/>
                                            <t t-set="s" t-value="s+1"/>
                                        </td>

                                    </tr>
                                </t>
                            </tbody>
                        </table>
                        <br/>
                        <table class="table table-sm" style="width:35%">
                            <tr class="border-black o_subtotal" style="padding:5px">
                                <td>
                                    <span t-field="o.amount_untaxed"/>
                                </td>
                                <td class="text-right">
                                    <strong>القيمة</strong>
                                </td>

                            </tr>
                            <t t-foreach="o.amount_by_group" t-as="amount_by_group">
                                <tr style="">
                                    <t t-if="len(o.tax_line_ids) == 1 and o.amount_untaxed == amount_by_group[2]">

                                        <td class="o_price_total" style="width:60%">
                                            <span t-esc="amount_by_group[3]"/>
                                        </td>
                                        <td class="text-right" style="width:60%">
                                            <strong>الضريبة</strong>
                                            <!--<span t-esc="amount_by_group[0]"/>-->
                                        </td>

                                    </t>
                                    <t t-else="">
                                        <td>
                                            <span t-esc="amount_by_group[0]"/>
                                            <span>&amp;nbsp;
                                                <span>on</span>
                                                <t t-esc="amount_by_group[4]"/>
                                            </span>
                                        </td>
                                        <td class="text-right o_price_total">
                                            <span t-esc="amount_by_group[3]"/>
                                        </td>
                                    </t>
                                </tr>
                            </t>
                            <tr class="border-black o_subtotal" style="padding:5px">
                                <td>
                                    <span t-field="o.discount_amount"/>
                                </td>
                                <td class="text-right">
                                    <strong>الخصم</strong>
                                </td>

                            </tr>
                            <tr style="padding:5px">
                                <td>
                                    <span t-field="o.ks_amount_discount"/>
                                </td>
                                <td class="text-right">
                                    <strong>الخصم النقدي</strong>
                                </td>

                            </tr>

                            <tr class="border-black o_total">
                                <td>
                                    <span t-field="o.amount_total"/>
                                </td>
                                <td class="text-right">
                                    <strong>الصافي</strong>
                                </td>
                            </tr>
                        </table>

                    </t>
                </div>
            </t>
        </t>
    </template>

</odoo>